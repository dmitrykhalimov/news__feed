{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./source/js/main.js","webpack:///./source/js/mocks.js","webpack:///./source/js/presenter/feed.js","webpack:///./source/js/utils.js","webpack:///./source/js/utils/render.js","webpack:///./source/js/view/abstract.js","webpack:///./source/js/view/button.js","webpack:///./source/js/view/news-container.js","webpack:///./source/js/view/news-feed.js","webpack:///./source/js/view/news-item.js"],"names":[],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;AClFA;AAAA;AAAA;AAAA;AAA4C;AACV;;AAEnB;AACf;AACA,WAAW,wBAAwB;;AAEnC,iDAAiD,UAAU;AAC3D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,0DAAQ;AAClD;AACA,WAAW;AACX,OAAO;AACP;AACA;AACA,OAAO;AACP;;AAEA;AACA,kCAAkC,0DAAQ,kBAAkB,gDAAS;AACrE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;;ACjDA;AAAA;AAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AClCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuD;AACnB;AACW;AACN;AACA;AACF;;AAExB;AACf;AACA;;AAEA;;AAEA;AACA,4BAA4B,4DAAa;;AAEzC;;AAEA,uCAAuC,4DAAS;AAChD,gCAAgC,oDAAM,cAAc,4DAAa;AACjE,kCAAkC,uDAAQ;;AAE1C;AACA;AACA;;AAEA;AACA,IAAI,4DAAM,6DAA6D,4DAAc;AACrF;;AAEA;AACA,IAAI,4DAAM,gFAAgF,4DAAc;AACxG;AACA;;AAEA;AACA;AACA,2BAA2B,uDAAQ;AACnC;AACA,MAAM,4DAAM,8DAA8D,4DAAc;AACxF,KAAK;;;AAGL,IAAI,4DAAM,kFAAkF,4DAAc;AAC1G;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjEA;AAAA;AAAA;AAAO;AACP;AACA;AACA,GAAG;AACH;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;;;;;ACdA;AAAA;AAAA;AAAA;AAAO;AACP;AACA;AACA;AACA;;AAEO;AACP;AACA;;AAEA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACtBA;AAAA;AAAA;AAA8C;;AAE/B;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB,mEAAa;AACnC;;AAEA;AACA;AACA;;;;;;;;;;;;;ACpBA;AAAA;AAAA;AAAkC;;AAElC;AACA;AACA;AACA,UAAU,YAAY,KAAK,gBAAgB;AAC3C;AACA;AACA;;AAEe,qBAAqB,iDAAQ;AAC5C;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,oCAAoC,kBAAkB,KAAK,gBAAgB;AAC3E;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;;;;;;;;;;;;AC7CA;AAAA;AAAA;AAAkC;;AAElC;AACA;AACA;;AAEe,4BAA4B,iDAAQ;AACnD;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACZA;AAAA;AAAA;AAAkC;;AAElC;AACA;;AAEA;AACA;;AAEe,uBAAuB,iDAAQ;AAC9C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;;;;;;;;;;;;ACvBA;AAAA;AAAA;AAAA;AAAkC;AACe;;AAEjD;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA,GAAG;AACH;;AAEA;AACA;AACA,YAAY,QAAQ;AACpB;AACA,aAAa,KAAK;AAClB,4CAA4C,sEAAuB,OAAO;AAC1E,gBAAgB,uCAAuC;AACvD;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEe,uBAAuB,iDAAQ;AAC9C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./source/js/main.js\");\n","import NewsFeed from \"../js/presenter/feed\";\nimport {newsItems} from \"./mocks\";\n\nexport default class NewsWidget {\n  constructor(config) {\n    const {container, type, source} = config;\n\n    this._newsBlock = document.querySelector(`#${container}`);\n    this._type = type;\n    this._source = source;\n  }\n\n  startFromServer() {\n    fetch(this._source)\n      .then((response) => {\n        if (response.status !== 200) {\n          throw new Error(`Ошибка загрузки данных с сервера: ` +\n            response.status);\n        }\n        response.json()\n          .then((news) => {\n            const newsFeedPresenter = new NewsFeed(this._newsBlock, news);\n            newsFeedPresenter.init();\n          });\n      })\n      .catch((err) => {\n        throw new Error(`Произошла неизвестная ошибка, код ошибки:` + err);\n      });\n  }\n\n  startWithMocks() {\n    const newsFeedPresenter = new NewsFeed(this._newsBlock, newsItems);\n    newsFeedPresenter.init();\n  }\n\n  init() {\n    if (!this._newsBlock) {\n      throw new Error(`Выбран несуществующий контейнер`);\n    }\n    if (this._type === `server`) {\n      this.startFromServer();\n    } else if (this._type === `mocks`) {\n      this.startWithMocks();\n    } else {\n      throw new Error(`Некорректно указан тип работы`);\n    }\n  }\n}\n\nwindow.NewsWidget = NewsWidget;\n\n","export const newsItems = [\n  {\n    id: 0,\n    heading: `В деревне Бабкино небывалый урожай капусты`,\n    name: `Валерий Петриченко`,\n    isRead: false,\n    date: `2020-12-04T17:13:50.157Z`,\n    text: [\n      `Небывалым скандалом окончилась футбольная игра между футбольными клубами “Факел” и “Пламя”. На 85 минуте в ворота гостей был назначен пенальти.`,\n      `Полузащитник гостей приготовился ударить по мячу, но озорной пес Тузик схватил его за бутсу, снял с ноги и был таков.`\n    ]\n  },\n  {\n    id: 1,\n    heading: `Спортивная битва переросла в массовую драку`,\n    name: `Алина Ткачева`,\n    isRead: false,\n    date: `2020-12-04T17:13:50.157Z`,\n    text: [\n      `Небывалым скандалом окончилась футбольная игра между футбольными клубами “Факел” и “Пламя”. На 85 минуте в ворота гостей был назначен пенальти.`,\n      `Полузащитник гостей приготовился ударить по мячу, но озорной пес Тузик схватил его за бутсу, снял с ноги и был таков.`\n    ]\n  },\n  {\n    id: 2,\n    heading: `Спортивная битва переросла в массовую драку`,\n    name: `Алина Ткачева`,\n    isRead: false,\n    date: `2020-04-12T14:48:00.000Z`,\n    text: [\n      `Небывалым скандалом окончилась футбольная игра между футбольными клубами “Факел” и “Пламя”. На 85 минуте в ворота гостей был назначен пенальти.`,\n      `Полузащитник гостей приготовился ударить по мячу, но озорной пес Тузик схватил его за бутсу, снял с ноги и был таков.`\n    ]\n  }\n];\n","import {render, RenderPosition} from \"../utils/render\";\nimport Button from \"../view/button\";\nimport Container from \"../view/news-container\";\nimport NewsFeed from \"../view/news-feed\";\nimport NewsItem from \"../view/news-item\";\nimport {howManyReaded} from \"../utils\";\n\nexport default class Feed {\n  constructor(newsBlock, news) {\n    this._newsItems = news;\n\n    this._isRendered = false;\n\n    this._allQuantity = news.length;\n    this._notReadQuantity = howManyReaded(news);\n\n    this._newsBlock = newsBlock;\n\n    this._newsContainerComponent = new Container();\n    this._buttonComponent = new Button(news.length, howManyReaded(news));\n    this._newsFeedComponent = new NewsFeed();\n\n    this._handleNewsButtonClick = this._handleNewsButtonClick.bind(this);\n    this._handleReadNewsClick = this._handleReadNewsClick.bind(this);\n  }\n\n  _renderContainer() {\n    render(this._newsBlock, this._newsContainerComponent.getElement(), RenderPosition.AFTERBEGIN);\n  }\n\n  _renderButton() {\n    render(this._newsContainerComponent.getElement(), this._buttonComponent.getElement(), RenderPosition.AFTERBEGIN);\n    this._buttonComponent.setClickHandler(this._handleNewsButtonClick);\n  }\n\n  _renderNews() {\n    this._newsItems.forEach((newsItemData) => {\n      const newsItem = new NewsItem(newsItemData);\n      newsItem.setClickHandler(this._handleReadNewsClick);\n      render(this._newsFeedComponent.getElement(), newsItem.getElement(), RenderPosition.BEFOREEND);\n    });\n\n\n    render(this._newsContainerComponent.getElement(), this._newsFeedComponent.getElement(), RenderPosition.BEFOREEND);\n  }\n\n  init() {\n    this._renderContainer();\n    this._renderButton();\n  }\n\n  _handleNewsButtonClick() {\n    if (!this._isRendered) {\n      this._renderNews();\n      this._isRendered = true;\n    } else {\n      this._newsFeedComponent.toggleNewsFeed();\n    }\n  }\n\n  _handleReadNewsClick() {\n    // также заглушка, в \"боевом\" режиме использовалась бы перерисовка кнопки, после изменения модели\n    this._notReadQuantity--;\n    this._buttonComponent.changeReaded(this._notReadQuantity);\n  }\n}\n\n","export const howManyReaded = (news) => {\n  return news.filter((newsItem) => {\n    return newsItem.isRead === false;\n  }).length;\n};\n\nexport const translateDateFromServer = (date) => {\n  return new Date(date).toLocaleString(`ru`, {\n    day: `numeric`,\n    year: `numeric`,\n    month: `long`,\n    hour: `2-digit`,\n    minute: `2-digit`,\n  });\n};\n","export const RenderPosition = {\n  AFTERBEGIN: `afterbegin`,\n  AFTEREND: `afterend`,\n  BEFOREEND: `beforeend`,\n};\n\nexport const createElement = (template) => {\n  const newElement = document.createElement(`div`);\n  newElement.innerHTML = template;\n\n  return newElement.firstElementChild;\n};\n\nexport const render = (container, child, place) => {\n  switch (place) {\n    case RenderPosition.AFTERBEGIN:\n      container.prepend(child);\n      break;\n    case RenderPosition.BEFOREEND:\n      container.append(child);\n      break;\n  }\n};\n","import {createElement} from \"../utils/render\";\n\nexport default class Abstract {\n  constructor() {\n    this._element = null;\n    this._createTemplate = null;\n    this._callback = null;\n  }\n\n  getTemplate() {\n    return this._createTemplate;\n  }\n\n  getElement() {\n    if (!this._element) {\n      this._element = createElement(this.getTemplate());\n    }\n\n    return this._element;\n  }\n}\n","import Abstract from \"./abstract\";\n\nconst createTemplate = (allQuantity, notReadQuantity) => {\n  return `<button class=\"news__button\">\n  <span>Новости</span>\n  <span>${allQuantity} / ${notReadQuantity} непрочитано</span>\n  <span></span>\n</button>`;\n};\n\nexport default class Button extends Abstract {\n  constructor(allQuantity, notReadQuantity) {\n    super();\n\n    this._element = null;\n\n    this._allQuantity = allQuantity;\n\n    this._callback = {};\n    this._clickHandler = this._clickHandler.bind(this);\n\n    this._createTemplate = createTemplate(allQuantity, notReadQuantity);\n    // this._buttonShow = this.getElement().querySelector(`button`);\n  }\n\n  setClickHandler(callback) {\n    this._callback.click = callback;\n    this.getElement().addEventListener(`click`, this._clickHandler);\n  }\n\n  changeReaded(notReadQuantity) {\n    this._qunatity = this.getElement().querySelector(`span:not(:first-child)`);\n    this._qunatity.textContent = `${this._allQuantity} / ${notReadQuantity} непрочитано`;\n  }\n\n  _clickHandler(evt) {\n    evt.preventDefault();\n    this._callback.click();\n\n    if (!this.getElement().classList.contains(`news__button--opened`)) {\n      this.getElement().classList.add(`news__button--opened`);\n    } else {\n      this.getElement().classList.remove(`news__button--opened`);\n    }\n  }\n}\n","import Abstract from \"./abstract\";\n\nconst createTemplate = () => {\n  return `<section class=\"news__container\"></section>`;\n};\n\nexport default class NewsContainer extends Abstract {\n  constructor() {\n    super();\n    this._element = null;\n    this._createTemplate = createTemplate();\n  }\n}\n","import Abstract from \"./abstract\";\n\nconst createButton = () => {\n  return `<section class=\"news__feed\">\n\n  </section>`;\n};\n\nexport default class NewsFeed extends Abstract {\n  constructor() {\n    super();\n    this._createTemplate = createButton();\n  }\n\n  // если пользователь скрывает/раскрывает виджет\n  toggleNewsFeed() {\n    // можно конечно удалять форму, и заново рендерить, но я посчитал это менее экономичным\n    if (this.getElement().classList.contains(`visually-hidden`)) {\n      this.getElement().classList.remove(`visually-hidden`);\n    } else {\n      this.getElement().classList.add(`visually-hidden`);\n    }\n  }\n}\n","import Abstract from \"./abstract\";\nimport {translateDateFromServer} from \"../utils\";\n\nconst createDescription = (text) => {\n  return text.reduce((acc, textItem) => {\n    acc += `<p>${textItem}</p>`;\n    return acc;\n  }, ``);\n};\n\nconst createTemplate = (heading, name, time, text, isRead) => {\n  return `<article class=\"news__item\">\n      <h3>${heading}</h3>\n      <div class=\"news__details\">\n        <b>${name}</b>\n        <time datetime=\"2001-05-15 19:00\">${translateDateFromServer(time)}</time>\n        <span>${!isRead ? `Не прочитано` : `Прочитано`}</span>\n        <button>Читать далее</button>\n        <div class=\"news__text visually-hidden\">\n          ${createDescription(text)}\n        </div>\n      </div>\n    </article>`;\n};\n\nexport default class NewsItem extends Abstract {\n  constructor(newsItem) {\n    super();\n\n    this._heading = newsItem.heading;\n    this._name = newsItem.name;\n    this._time = newsItem.date;\n    this._isRead = newsItem.isRead;\n    this._text = newsItem.text;\n    this._callback = {};\n\n    this._newsTextContainer = this.getElement().querySelector(`.news__text`);\n    this._buttonExpand = this.getElement().querySelector(`button`);\n    this._readStatus = this.getElement().querySelector(`span`);\n\n    this._buttonClickHandler = this._buttonClickHandler.bind(this);\n  }\n\n  getTemplate() {\n    return createTemplate(\n        this._heading,\n        this._name,\n        this._time,\n        this._text,\n        this._isRead);\n  }\n\n  setClickHandler(callback) {\n    this._callback.click = callback;\n    this._buttonExpand.addEventListener(`click`, this._buttonClickHandler);\n  }\n\n  _buttonClickHandler() {\n    if (this._newsTextContainer.classList.contains(`visually-hidden`)) {\n      this._newsTextContainer.classList.remove(`visually-hidden`);\n      this._buttonExpand.textContent = `Свернуть`;\n\n      if (!this._isRead) {\n        // это эмуляция смены статуса, т.к. в задании указано не хранить статус. В боевом проекте нужно было бы обновлять модель и перерисовывать компонент.\n        this._isRead = true;\n        this._readStatus.textContent = `Прочитано`;\n        this._callback.click();\n      }\n\n    } else {\n      this._newsTextContainer.classList.add(`visually-hidden`);\n      this._buttonExpand.textContent = `Читать далее`;\n    }\n  }\n}\n"],"sourceRoot":""}