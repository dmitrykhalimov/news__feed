# News Widget

Виджет отображающий новостную ленту.

---
#### Технологии

_`ES2015+`, `Fetch API`, `Webpack`, `БЭМ`, `Gulp`, `Sass`._

#### Структура репозитория

* **build** - итоговая сборка, html-файл создан вручную, css и js копируются при помощи команд (см. ниже)
* **markup** - итоговая верстка, в нее Gulp копирует собранный проект
* **source** - исходные файлы
* **source/markup** - файлы проекта Sass/Gulp
* **source/js** - файлы JavaScript Webpack

#### Команды репозитория

* Запуск сервера верстки - `npm run markup-start` (порт `3000`)
* Сборка верстки - `npm run markup-build` (сборка собирается в `/
* Перенос style.css в папку `/build` - `npm run markup-copy`

* Запуск модуля - `npm run js-start`(используется папка `/build`, порт `3005`)
* Сборка модуля - `npm run js-build` (сборка собирается в `/build`, копируется `style.css` из `/markup`)
* Сборка модуля в режиме production - `npm run js-build-prod` (сборка собирается в `/build` копируется `style.css` из `/markup`)

* Запуск тестирования - `npm run test`


#### Подключение и инициализация

Для подключения виджета в HTML-файл необходимо импортировать файл стиля и файл js

```
<link href="css/style.css" rel="stylesheet">
<script src="bundle.js"></script>
```
Для инициализации необходимо создать новый экземпляр виджета, в качестве аргумента необходимо передать объект содержащий данные для инициализации.
```
<script>
    const newsWidgetData = new NewsWidget({
        container: "news",
        type: "server",
        source: "https://run.mocky.io/v3/f713c246-2a14-4520-8468-42de76929ed7"
    });
</script>
```
Конструктор принимает в себя 3 параметра:
- **container** - id-контейнера, 
- **type** - типа загрузки данных: `server` или `mock`, 
- **source** - адрес сервера. 

В режиме `mock`, не требуется указание сервера, данные загружаются из самого виджета (файл `source/mock.js`)

Для стилизации используется шрифт Rubik, для использования необходимо разместить шрифты из папки `fonts` в папке `\fonts` проекта. 

#### Принцип работы

После инициализации отрисовывается кнопка-иконка (контейнер `NewsContainer` и `MainButton`), содержащая количество загруженных новостей и количество непрочитанных из них. По ее нажатию происходит отрисовка списка новостей (контейнер `NewsFeed` и элементы `NewsItem`). До нажатия на кнопку, отрисовка не происходит (т.е. не используется конструкция visually-hidden или display: none) в целях производительности.

По нажатию на кнопку `Читать далее` разворачивается новость, а кнопка меняет значение на `Свернуть`. Также меняется статус новости на `Прочитано`, и уменьшается счетчик прочитанных новостей. 

#### Дополнительные уточнения

Для реализации виджета я выбрал паттерн MVP т.к. в случае динамически генерируемых новостей он показался мне оптимальным (если бы не необходимость использования чистого JS, я бы использовал React) и синтаксис ES6 (так он мне нравится больше чем ES5 и IIFE).

В задании было указано, что один контейнер новости должен содержать ссылку на подробности. Для того чтобы реализовать возможность отметки прочитанных новостей, мне показалось логичным вместо ссылки добавить кнопку с раскрывающейся новостью. При необходимости, кнопка может быть заменена ссылкой, достаточно заменить button на a, и убрать обработчики.

Отметки "прочитано" и "количество прочитанных" изменяются путем изменения самого элемента через textContent, при неизменной модели. Это мне кажется не совсем оптимальным (правильнее - реализовать изменение модели и перерисовку новости (replaceChild) и кнопки со статистикой), но так как такого требования в ТЗ нет, я написал такую эмуляцию.

Сетка реализована через CSS-Grid.

#### TODO

* Реализовать через localStorage хранение просмотренных новостей
* Добавить кнопку-переключатель "скрывать прочитанные"
* Предусмотреть возможность стилизации контейнера через аргументы передаваемые при вызове (цвет, центровка, фон)
* Удалить подключение шрифта
